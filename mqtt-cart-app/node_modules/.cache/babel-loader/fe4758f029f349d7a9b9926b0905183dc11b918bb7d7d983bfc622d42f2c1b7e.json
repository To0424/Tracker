{"ast":null,"code":"// mqttClient.js\nimport mqtt from 'mqtt';\nconst MQTT_BROKER_URL = 'mqtt://broker.hivemq.com:8000/mqtt';\nconst MQTT_TOPIC = 'cart/data';\nlet client = null;\nconst connect = onMessage => {\n  client = mqtt.connect(MQTT_BROKER_URL);\n  client.on('connect', () => {\n    console.log('Connected to MQTT broker');\n    client.subscribe(MQTT_TOPIC);\n  });\n  client.on('message', (topic, message) => {\n    if (topic === MQTT_TOPIC && onMessage) {\n      const data = JSON.parse(message.toString());\n      onMessage(data);\n    }\n  });\n  return client;\n};\nconst disconnect = () => {\n  if (client) {\n    client.end();\n    client = null;\n  }\n};\nexport { connect, disconnect };","map":{"version":3,"names":["mqtt","MQTT_BROKER_URL","MQTT_TOPIC","client","connect","onMessage","on","console","log","subscribe","topic","message","data","JSON","parse","toString","disconnect","end"],"sources":["/Users/daviswu/Desktop/cart-tracker/React-MQTT/mqtt-cart-app/src/hooks/useMqtt.js"],"sourcesContent":["// mqttClient.js\nimport mqtt from 'mqtt';\n\nconst MQTT_BROKER_URL = 'mqtt://broker.hivemq.com:8000/mqtt';\nconst MQTT_TOPIC = 'cart/data';\n\nlet client = null;\n\nconst connect = (onMessage) => {\n  client = mqtt.connect(MQTT_BROKER_URL);\n\n  client.on('connect', () => {\n    console.log('Connected to MQTT broker');\n    client.subscribe(MQTT_TOPIC);\n  });\n\n  client.on('message', (topic, message) => {\n    if (topic === MQTT_TOPIC && onMessage) {\n      const data = JSON.parse(message.toString());\n      onMessage(data);\n    }\n  });\n\n  return client;\n};\n\nconst disconnect = () => {\n  if (client) {\n    client.end();\n    client = null;\n  }\n};\n\nexport { connect, disconnect };"],"mappings":"AAAA;AACA,OAAOA,IAAI,MAAM,MAAM;AAEvB,MAAMC,eAAe,GAAG,oCAAoC;AAC5D,MAAMC,UAAU,GAAG,WAAW;AAE9B,IAAIC,MAAM,GAAG,IAAI;AAEjB,MAAMC,OAAO,GAAIC,SAAS,IAAK;EAC7BF,MAAM,GAAGH,IAAI,CAACI,OAAO,CAACH,eAAe,CAAC;EAEtCE,MAAM,CAACG,EAAE,CAAC,SAAS,EAAE,MAAM;IACzBC,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC;IACvCL,MAAM,CAACM,SAAS,CAACP,UAAU,CAAC;EAC9B,CAAC,CAAC;EAEFC,MAAM,CAACG,EAAE,CAAC,SAAS,EAAE,CAACI,KAAK,EAAEC,OAAO,KAAK;IACvC,IAAID,KAAK,KAAKR,UAAU,IAAIG,SAAS,EAAE;MACrC,MAAMO,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACH,OAAO,CAACI,QAAQ,CAAC,CAAC,CAAC;MAC3CV,SAAS,CAACO,IAAI,CAAC;IACjB;EACF,CAAC,CAAC;EAEF,OAAOT,MAAM;AACf,CAAC;AAED,MAAMa,UAAU,GAAGA,CAAA,KAAM;EACvB,IAAIb,MAAM,EAAE;IACVA,MAAM,CAACc,GAAG,CAAC,CAAC;IACZd,MAAM,GAAG,IAAI;EACf;AACF,CAAC;AAED,SAASC,OAAO,EAAEY,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}